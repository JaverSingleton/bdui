{
  "components": {
    "ContactItem": {
      "state": {
        "avatar": "",
        "name": "",
        "lastSeen": "",
        "targetLastSeen": {
          "functionType": "Condition",
          "value": "{{online}}",
          "trueResult": "Online",
          "falseResult": "{{lastSeen}}"
        },
        "online": false
      },
      "rootComponent": {
        "componentType": "Box",
        "children": [
          {
            "componentType": "Row",
            "layout_width": "fillMax",
            "layout_padding": {
              "start": 16,
              "end": 16,
              "top": 8,
              "bottom": 8
            },
            "children": [
              {
                "componentType": "Box",
                "layout_width": 72,
                "layout_height": 72,
                "children": [
                  {
                    "componentType": "Image",
                    "src": "{{avatar}}",
                    "contentScale": "Crop",
                    "clip": "Circle",
                    "layout_width": "fillMax",
                    "layout_height": "fillMax"
                  },
                  {
                    "functionType": "Condition",
                    "value": "{{online}}",
                    "trueResult": {
                      "componentType": "Image",
                      "src": "https://zibuhoker.ru/ifm/indicator.png",
                      "layout_alignment": "BottomEnd",
                      "contentScale": "Inside",
                      "clip": "Circle",
                      "layout_width": 24,
                      "layout_height": 24,
                      "layout_padding": {
                        "end": 2,
                        "bottom": 2
                      }
                    },
                    "falseResult": null
                  }
                ]
              },
              {
                "componentType": "Column",
                "layout_width": "fillMax",
                "children": [
                  {
                    "componentType": "Text",
                    "text": "{{name}}",
                    "textSize": 16,
                    "layout_width": "fillMax",
                    "layout_padding": {
                      "top": 8,
                      "start": 8
                    }
                  },
                  {
                    "componentType": "Text",
                    "text": "{{targetLastSeen}}",
                    "textSize": 12,
                    "layout_width": "fillMax",
                    "layout_padding": {
                      "top": 8,
                      "start": 8,
                      "bottom": 8
                    }
                  }
                ]
              }
            ]
          }
        ]
      }
    },
    "ContactScreen": {
      "state": {
        "title": "",
        "header": {
          "functionType": "Condition",
          "value": {
            "functionType": "CheckEquals",
            "value1": "{{title}}",
            "value2": ""
          },
          "trueResult": null,
          "falseResult": {
            "componentType": "Toolbar",
            "title": {
              "functionType": "Condition",
              "value": "{{offlineMode}}",
              "trueResult": {
                "functionType": "JoinToString",
                "items": [
                  "{{title}}",
                  " (Offline mode)"
                ]
              },
              "falseResult": "{{title}}"
            }
          }
        },
        "contacts": [],
        "footer": {
          "componentType": "Button",
          "text": "Submit",
          "layout_alignment": "BottomCenter"
        }
      },
      "rootComponent": {
        "componentType": "Column",
        "children": [
          {
            "componentType": "Column",
            "children": {
              "functionType": "CombineArrays",
              "arrays": [
                [
                  "{{header}}"
                ],
                "{{contacts}}",
                [
                  {
                    "componentType": "Box",
                    "layout_height": "fillMax",
                    "layout_padding": {
                      "start": 10,
                      "end": 10,
                      "top": 4,
                      "bottom": 4
                    },
                    "children": [
                      "{{footer}}"
                    ]
                  }
                ]
              ]
            }
          }
        ]
      }
    },
    "_ContactItem": {
      "state": {
        "avatar": "",
        "name": "",
        "lastSeen": "",
        "offlineMode": false,
        "online": false
      },
      "rootComponent": {
        "componentType": "ContactItem",
        "avatar": "{{avatar}}",
        "name": "{{name}}",
        "lastSeen": "{{lastSeen}}",
        "online": {
          "functionType": "Condition",
          "value": "{{offlineMode}}",
          "trueResult": false,
          "falseResult": "{{online}}"
        }
      }
    }
  },
  "state": {
    "id": "root",
    "componentType": "ContactScreen",
    "offlineMode": "true",
    "title": "Contacts",
    "contacts": [
      {
        "componentType": "_ContactItem",
        "avatar": "https://www.meme-arsenal.com/memes/25bd41b4371cc7b1c206f98a1619b3cb.jpg",
        "name": "Happy Cat",
        "lastSeen": "21.11.2022",
        "online": true,
        "offlineMode": "{{offlineMode}}"
      },
      {
        "componentType": "_ContactItem",
        "id": "contact2",
        "avatar": "https://cdn-cbeko.nitrocdn.com/YAysSGytvxeVxHWdRPueSoYmAixjAhdB/assets/static/optimized/rev-a51233b/wp-content/uploads/2021/07/broken-15.jpeg",
        "name": "Broken Cat",
        "lastSeen": "20.11.2022",
        "online": true,
        "offlineMode": "{{offlineMode}}"
      },
      {
        "componentType": "_ContactItem",
        "id": "contact3",
        "avatar": "https://zibuhoker.ru/ifm/nyan-cat.jpg",
        "name": "Nyan Cat",
        "lastSeen": "23.11.2022",
        "online": false,
        "offlineMode": "{{offlineMode}}"
      }
    ]
  }
}